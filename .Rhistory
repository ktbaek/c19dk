library(krisr)
?aaa_to_a
?mean
?read.csv
lubridate::wday("2022-02-16")
lubridate::wday("2022-02-17")
last_wday_date <-
function(today_date, weekday) {
days_subtract <- dplyr::case_when(
lubridate::wday(today_date) == weekday ~ 0,
lubridate::wday(today_date) < weekday ~ 7 + lubridate::wday(today_date) - weekday,
lubridate::wday(today_date) > weekday ~ lubridate::wday(today_date) - weekday
)
as.character(lubridate::ymd(today_date) - days_subtract)
}
last_wday_date("2022-02-17", 1)
last_wday_date(ymd("2022-02-17"), 1)
last_wday_date(as.Date("2022-02-17"), 1)
class(last_wday_date("2022-02-17", 1))
class(last_wday_date(as.Date("2022-02-17"), 1))
date_to_yymmdd <- function(date) {
paste0(stringr::str_sub(date, 3, 4),
stringr::str_sub(date, 6, 7),
stringr::str_sub(date, 9, 10))
}
date_to_yymmdd("2022-02-17")
year <- c(2020, 2020, 2020, 2020, 2021, 2021, 2021, 2022)
week <- c(1, 15, 52, 53, 1, 15, 52, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%U%u")
}
week_to_date(year, week, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%W%u")
}
week_to_date(year, week, 1)
year <- c(2015, 2015, 2015, 2015, 2020, 2020, 2020, 2021, 2021, 2021)
week <- c(1, 52, 53, 1, 52, 53, 1, 52)
week_to_date(year, week, 1)
year <- c(2015, 2015, 2015, 2020, 2020, 2020, 2021, 2021)
week_to_date(year, week, 1)
year <- c(2014, 2015, 2015, 2015, 2020, 2020, 2020, 2021, 2021)
week <- c(1, 1, 52, 53, 1, 52, 53, 1, 52)
week_to_date(year, week, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%U%u")
}
week_to_date(year, week, 1)
year <- c(2010:2021)
week_to_date(year, 1, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%V%u")
}
week_to_date(year, 1, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%V%v")
}
week_to_date(year, 1, 1)
week_to_date <- function(year, week, day = "1"){
as.Date(paste0(year, sprintf("%02d", week), day), "%Y%U%u")
}
isoweek::ISOweek2date("2014-W01-1")
ISOweek::ISOweek2date("2014-W01-1")
ISOweek::ISOweek2date("2015-W01-1")
ISOweek::ISOweek2date("2020-W01-1")
ISOweek::ISOweek2date("2020-W52-1")
ISOweek::ISOweek2date("2020-W53-1")
week_to_date <- function(year, week, day = "1"){
ISOWeek::ISOweek2date(paste0(year, "-W", sprintf("%02d", week), "-", day))
}
week_to_date(year, 1, 1)
week_to_date <- function(year, week, day = "1"){
ISOweek::ISOweek2date(paste0(year, "-W", sprintf("%02d", week), "-", day))
}
week_to_date(year, 1, 1)
week_to_date(year, 53, 1)
week_to_date(year, 55, 1)
week_to_date(year, 53, 1)
week_to_date("2020", "1", 1)
week_to_date("2020", 1, 1)
class(week_to_date("2020", 1, 1))
week_to_date <-
function(year, week, day = "1"){
ISOweek::ISOweek2date(paste0(year, "-W", sprintf("%02s", week), "-", day))
}
week_to_date("2020", "1", 1)
week_to_date("2020", "01", 1)
week_to_date("2020", "0001", 1)
class(1)
class(1) == "numeric"
class(1) == "character"
class(as.factor(1))
week_to_date("2020", "1", 1)
week_to_date("2020", as.factor("1"), 1)
week_to_date("2020", as.factor(1), 1)
week_to_date <-
function(year, week, day = "1"){
if(class(week) == "numeric") {
w <- sprintf("%02d", week)
}else{
w <- sprintf("%02s", week)
}
ISOweek::ISOweek2date(paste0(year, "-W", w, "-", day))
}
week_to_date("2020", as.factor(1), 1)
week_to_date("2020", 1, 1)
week_to_date("2020", "1", 1)
week_to_date(2020, "1", 1)
week_to_date(2020, "1", 2)
week_to_date(2020, "1", "2")
floor_date_monday <-
function(date) {
lubridate::floor_date(date, unit = "week", week_start = getOption("lubridate.week.start", 1))
}
floor_date_monday(ymd("2022-02-17"))
floor_date_monday(as.Date("2022-02-17"))
floor_date_monday("2022-02-17")
floor_date_monday(as.Date("2022-02-17"))
class(floor_date_monday(as.Date("2022-02-17")))
get_age_breaks <- function(maxage = 100, agesplit = 10) c(seq(-1, maxage - 1, agesplit), 125)
get_age_breaks()
tan(3)
atan(2/6)
45 - atan(2/6)
45 - atan(2/2)
atan(2/2)
0.7853 - arctan(2/6)
0.7853 - atan(2/6)
tan(0.7853 - atan(2/6))
tan(0.7853982 - atan(2/6))
40 + sqrt(40) * 0.5
sqrt(40 + sqrt(40) * 0.5)
sqrt(40)
sqrt(60)
sqrt(40 * (sqrt(40) * 0.5)**2)
sqrt(40 + (sqrt(40) * 0.5)**2)
40 * sqrt(40) * 0.5 * 0.5
sqrt(40) * 0.5
get_age_breaks(100, 10)
floor_date_wday <- function(date, day = 1) {
lubridate::floor_date(date, unit = "week", week_start = getOption("lubridate.week.start", day))
}
last_wday_date <- function(today_date, weekday) {
days_subtract <- dplyr::case_when(
lubridate::wday(today_date) == weekday ~ 0,
lubridate::wday(today_date) < weekday ~ 7 + lubridate::wday(today_date) - weekday,
lubridate::wday(today_date) > weekday ~ lubridate::wday(today_date) - weekday
)
as.character(lubridate::ymd(today_date) - days_subtract)
}
floor_date_wday("2022-02-17", 1)
floor_date_wday(as.Date("2022-02-17"), 1)
floor_date_wday(as.Date("2022-02-17"), 2)
floor_date_wday(as.Date("2022-02-17"), 0)
floor_date_wday(as.Date("2022-02-17"), 5)
floor_date_wday(as.Date("2022-02-17"), 4)
floor_date_wday(as.Date("2022-02-17"), 5)
floor_date_wday(as.Date("2022-02-17"), 6)
last_wday_date("2022-02-17", 1)
last_wday_date("2022-02-17", 2)
last_wday_date(as.Date("2022-02-17"), 2)
floor_date_wday <- function(date, day = 1) {
date <- lubridate::ymd(date)
lubridate::floor_date(date, unit = "week", week_start = getOption("lubridate.week.start", day))
}
floor_date_wday(as.Date("2022-02-17"), 6)
floor_date_wday(as.Date("2022-02-17", 6)
floor_date_wday("2022-02-17", 6)
library(devtools)
getwd()
build()
install()
document()
check()
